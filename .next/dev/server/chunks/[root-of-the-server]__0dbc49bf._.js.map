{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/recreate/recreate_on_react/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line no-var\r\n  var prismaGlobal: PrismaClient | undefined;\r\n}\r\n\r\nexport const prisma =\r\n  global.prismaGlobal ||\r\n  new PrismaClient({\r\n    log: process.env.NODE_ENV === \"development\" ? [\"query\", \"error\", \"warn\"] : [\"error\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") global.prismaGlobal = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,SACX,OAAO,YAAY,IACnB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,OAAO,YAAY,GAAG","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/recreate/recreate_on_react/src/app/api/products/route.ts"],"sourcesContent":["// app/api/products/route.ts\r\nimport { NextResponse } from \"next/server\";\r\nimport { prisma } from \"@/lib/prisma\";\r\n\r\nexport async function GET() {\r\n  const items = await prisma.product.findMany({\r\n    include: { productSizes: true },\r\n    orderBy: { id: \"asc\" },\r\n  });\r\n\r\n  // ← infer types directly from the query result\r\n  type ProductWithSizes = typeof items[number];\r\n  type Size = ProductWithSizes[\"productSizes\"][number];\r\n\r\n  const data = items.map((p: ProductWithSizes) => {\r\n    const sizes: Size[] = p.productSizes || [];\r\n\r\n    // try to find size “s” (small)\r\n    const byS: Size | undefined = sizes.find((s: Size) => s.key === \"s\");\r\n\r\n    // find the cheapest size if no “s” exists\r\n    const cheapest: Size | null =\r\n      sizes.length > 0\r\n        ? sizes.reduce(\r\n            (min: Size, s: Size) => (s.priceCents < min.priceCents ? s : min),\r\n            sizes[0]\r\n          )\r\n        : null;\r\n\r\n    // define the default size: prefer “s”, otherwise the cheapest\r\n    const def: Size | null = byS || cheapest || null;\r\n\r\n    return {\r\n      id: p.id,\r\n      name: p.name,\r\n      description: p.description ?? null,\r\n      category: p.category,\r\n      image: p.image ?? null,\r\n      sizes: sizes.map((s: Size) => ({\r\n        key: s.key,\r\n        label: s.label ?? null,\r\n        priceCents: s.priceCents,\r\n        discountPriceCents: s.discountPriceCents ?? null,\r\n      })),\r\n      defaultSizeKey: def?.key ?? null,\r\n      priceCents: def?.priceCents ?? p.priceCents,\r\n      discountPriceCents:\r\n        def?.discountPriceCents ?? p.discountPriceCents ?? null,\r\n    };\r\n  });\r\n\r\n  return NextResponse.json({ data });\r\n}\r\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAC5B;AACA;;;AAEO,eAAe;IACpB,MAAM,QAAQ,MAAM,gIAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QAC1C,SAAS;YAAE,cAAc;QAAK;QAC9B,SAAS;YAAE,IAAI;QAAM;IACvB;IAMA,MAAM,OAAO,MAAM,GAAG,CAAC,CAAC;QACtB,MAAM,QAAgB,EAAE,YAAY,IAAI,EAAE;QAE1C,+BAA+B;QAC/B,MAAM,MAAwB,MAAM,IAAI,CAAC,CAAC,IAAY,EAAE,GAAG,KAAK;QAEhE,0CAA0C;QAC1C,MAAM,WACJ,MAAM,MAAM,GAAG,IACX,MAAM,MAAM,CACV,CAAC,KAAW,IAAa,EAAE,UAAU,GAAG,IAAI,UAAU,GAAG,IAAI,KAC7D,KAAK,CAAC,EAAE,IAEV;QAEN,8DAA8D;QAC9D,MAAM,MAAmB,OAAO,YAAY;QAE5C,OAAO;YACL,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,IAAI;YACZ,aAAa,EAAE,WAAW,IAAI;YAC9B,UAAU,EAAE,QAAQ;YACpB,OAAO,EAAE,KAAK,IAAI;YAClB,OAAO,MAAM,GAAG,CAAC,CAAC,IAAY,CAAC;oBAC7B,KAAK,EAAE,GAAG;oBACV,OAAO,EAAE,KAAK,IAAI;oBAClB,YAAY,EAAE,UAAU;oBACxB,oBAAoB,EAAE,kBAAkB,IAAI;gBAC9C,CAAC;YACD,gBAAgB,KAAK,OAAO;YAC5B,YAAY,KAAK,cAAc,EAAE,UAAU;YAC3C,oBACE,KAAK,sBAAsB,EAAE,kBAAkB,IAAI;QACvD;IACF;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE;IAAK;AAClC","debugId":null}}]
}