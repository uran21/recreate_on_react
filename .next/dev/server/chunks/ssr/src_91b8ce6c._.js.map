{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/styles/MenuPage.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"card\": \"MenuPage-module__X_MwOW__card\",\n  \"card__body\": \"MenuPage-module__X_MwOW__card__body\",\n  \"card__media\": \"MenuPage-module__X_MwOW__card__media\",\n  \"card__price\": \"MenuPage-module__X_MwOW__card__price\",\n  \"card__sub\": \"MenuPage-module__X_MwOW__card__sub\",\n  \"card__title\": \"MenuPage-module__X_MwOW__card__title\",\n  \"chip\": \"MenuPage-module__X_MwOW__chip\",\n  \"chip__iconbox\": \"MenuPage-module__X_MwOW__chip__iconbox\",\n  \"grid-error\": \"MenuPage-module__X_MwOW__grid-error\",\n  \"grid-loader\": \"MenuPage-module__X_MwOW__grid-loader\",\n  \"ico\": \"MenuPage-module__X_MwOW__ico\",\n  \"ico--base\": \"MenuPage-module__X_MwOW__ico--base\",\n  \"ico--hover\": \"MenuPage-module__X_MwOW__ico--hover\",\n  \"icon-btn\": \"MenuPage-module__X_MwOW__icon-btn\",\n  \"is-active\": \"MenuPage-module__X_MwOW__is-active\",\n  \"is-on\": \"MenuPage-module__X_MwOW__is-on\",\n  \"is-open\": \"MenuPage-module__X_MwOW__is-open\",\n  \"loadmore\": \"MenuPage-module__X_MwOW__loadmore\",\n  \"menu\": \"MenuPage-module__X_MwOW__menu\",\n  \"menu__accent\": \"MenuPage-module__X_MwOW__menu__accent\",\n  \"menu__filters\": \"MenuPage-module__X_MwOW__menu__filters\",\n  \"menu__grid\": \"MenuPage-module__X_MwOW__menu__grid\",\n  \"menu__head\": \"MenuPage-module__X_MwOW__menu__head\",\n  \"menu__more\": \"MenuPage-module__X_MwOW__menu__more\",\n  \"menu__title\": \"MenuPage-module__X_MwOW__menu__title\",\n  \"modal\": \"MenuPage-module__X_MwOW__modal\",\n  \"modal__close-ico\": \"MenuPage-module__X_MwOW__modal__close-ico\",\n  \"modal__close-x\": \"MenuPage-module__X_MwOW__modal__close-x\",\n  \"modal__dialog\": \"MenuPage-module__X_MwOW__modal__dialog\",\n  \"modal__scrim\": \"MenuPage-module__X_MwOW__modal__scrim\",\n  \"muted\": \"MenuPage-module__X_MwOW__muted\",\n  \"pm-chip\": \"MenuPage-module__X_MwOW__pm-chip\",\n  \"pm-chip__lead\": \"MenuPage-module__X_MwOW__pm-chip__lead\",\n  \"pm__chips\": \"MenuPage-module__X_MwOW__pm__chips\",\n  \"pm__close\": \"MenuPage-module__X_MwOW__pm__close\",\n  \"pm__content\": \"MenuPage-module__X_MwOW__pm__content\",\n  \"pm__desc\": \"MenuPage-module__X_MwOW__pm__desc\",\n  \"pm__grid\": \"MenuPage-module__X_MwOW__pm__grid\",\n  \"pm__label\": \"MenuPage-module__X_MwOW__pm__label\",\n  \"pm__loading\": \"MenuPage-module__X_MwOW__pm__loading\",\n  \"pm__media\": \"MenuPage-module__X_MwOW__pm__media\",\n  \"pm__note\": \"MenuPage-module__X_MwOW__pm__note\",\n  \"pm__section\": \"MenuPage-module__X_MwOW__pm__section\",\n  \"pm__title\": \"MenuPage-module__X_MwOW__pm__title\",\n  \"pm__total\": \"MenuPage-module__X_MwOW__pm__total\",\n  \"pm__total-label\": \"MenuPage-module__X_MwOW__pm__total-label\",\n  \"pm__total-price\": \"MenuPage-module__X_MwOW__pm__total-price\",\n  \"price--new\": \"MenuPage-module__X_MwOW__price--new\",\n  \"priceOld\": \"MenuPage-module__X_MwOW__priceOld\",\n  \"qty\": \"MenuPage-module__X_MwOW__qty\",\n  \"qty-btn\": \"MenuPage-module__X_MwOW__qty-btn\",\n  \"qty-val\": \"MenuPage-module__X_MwOW__qty-val\",\n  \"remove\": \"MenuPage-module__X_MwOW__remove\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/recreate/recreate_on_react/src/components/menu/imgmap.ts"],"sourcesContent":["import type { Category } from \"./types\";\r\n\r\nexport const PLACEHOLDER_IMG = \"/assets/logo.svg\";\r\n\r\nexport const IMGMAP: Record<Category, Record<number, string>> = {\r\n  coffee: { 1:\"/assets/menu/coffee-1.jpg\",2:\"/assets/menu/coffee-2.jpg\",3:\"/assets/menu/coffee-3.jpg\",4:\"/assets/menu/coffee-4.jpg\",5:\"/assets/menu/coffee-5.jpg\",6:\"/assets/menu/coffee-6.jpg\",7:\"/assets/menu/coffee-7.jpg\",8:\"/assets/menu/coffee-8.jpg\" },\r\n  tea: { 9:\"/assets/menu/tea-1.jpg\",10:\"/assets/menu/tea-2.jpg\",11:\"/assets/menu/tea-3.jpg\",12:\"/assets/menu/tea-4.jpg\",13:\"/assets/menu/tea-5.jpg\",14:\"/assets/menu/tea-6.jpg\",15:\"/assets/menu/tea-7.jpg\",16:\"/assets/menu/tea-8.jpg\",29:\"/assets/menu/tea-9.jpg\",30:\"/assets/menu/tea-10.jpg\" },\r\n  dessert: { 17:\"/assets/menu/dessert-1.jpg\",18:\"/assets/menu/dessert-2.jpg\",19:\"/assets/menu/dessert-3.jpg\",20:\"/assets/menu/dessert-4.jpg\",21:\"/assets/menu/dessert-5.jpg\",22:\"/assets/menu/dessert-6.jpg\",23:\"/assets/menu/dessert-7.jpg\",24:\"/assets/menu/dessert-8.jpg\",25:\"/assets/menu/dessert-9.jpg\",26:\"/assets/menu/dessert-10.jpg\",27:\"/assets/menu/dessert-11.jpg\",28:\"/assets/menu/dessert-12.jpg\",31:\"/assets/menu/dessert-13.jpg\",32:\"/assets/menu/dessert-14.jpg\" },\r\n};\r\n\r\nexport const FALLBACKS: Record<Category, string[]> = {\r\n  coffee: [\"/assets/menu/coffee-1.jpg\",\"/assets/menu/coffee-2.jpg\",\"/assets/menu/coffee-3.jpg\",\"/assets/menu/coffee-4.jpg\",\"/assets/menu/coffee-5.jpg\",\"/assets/menu/coffee-6.jpg\",\"/assets/menu/coffee-7.jpg\",\"/assets/menu/coffee-8.jpg\"],\r\n  tea: [\"/assets/menu/tea-1.jpg\",\"/assets/menu/tea-2.jpg\",\"/assets/menu/tea-3.jpg\",\"/assets/menu/tea-4.jpg\",\"/assets/menu/tea-5.jpg\",\"/assets/menu/tea-6.jpg\",\"/assets/menu/tea-7.jpg\",\"/assets/menu/tea-8.jpg\",\"/assets/menu/tea-9.jpg\",\"/assets/menu/tea-10.jpg\"],\r\n  dessert: [\"/assets/menu/dessert-1.jpg\",\"/assets/menu/dessert-2.jpg\",\"/assets/menu/dessert-3.jpg\",\"/assets/menu/dessert-4.jpg\",\"/assets/menu/dessert-5.jpg\",\"/assets/menu/dessert-6.jpg\",\"/assets/menu/dessert-7.jpg\",\"/assets/menu/dessert-8.jpg\",\"/assets/menu/dessert-9.jpg\",\"/assets/menu/dessert-10.jpg\",\"/assets/menu/dessert-11.jpg\",\"/assets/menu/dessert-12.jpg\",\"/assets/menu/dessert-13.jpg\",\"/assets/menu/dessert-14.jpg\"],\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAEO,MAAM,kBAAkB;AAExB,MAAM,SAAmD;IAC9D,QAAQ;QAAE,GAAE;QAA4B,GAAE;QAA4B,GAAE;QAA4B,GAAE;QAA4B,GAAE;QAA4B,GAAE;QAA4B,GAAE;QAA4B,GAAE;IAA4B;IAC1P,KAAK;QAAE,GAAE;QAAyB,IAAG;QAAyB,IAAG;QAAyB,IAAG;QAAyB,IAAG;QAAyB,IAAG;QAAyB,IAAG;QAAyB,IAAG;QAAyB,IAAG;QAAyB,IAAG;IAA0B;IAC/R,SAAS;QAAE,IAAG;QAA6B,IAAG;QAA6B,IAAG;QAA6B,IAAG;QAA6B,IAAG;QAA6B,IAAG;QAA6B,IAAG;QAA6B,IAAG;QAA6B,IAAG;QAA6B,IAAG;QAA8B,IAAG;QAA8B,IAAG;QAA8B,IAAG;QAA8B,IAAG;IAA8B;AACld;AAEO,MAAM,YAAwC;IACnD,QAAQ;QAAC;QAA4B;QAA4B;QAA4B;QAA4B;QAA4B;QAA4B;QAA4B;KAA4B;IACzO,KAAK;QAAC;QAAyB;QAAyB;QAAyB;QAAyB;QAAyB;QAAyB;QAAyB;QAAyB;QAAyB;KAA0B;IACjQ,SAAS;QAAC;QAA6B;QAA6B;QAA6B;QAA6B;QAA6B;QAA6B;QAA6B;QAA6B;QAA6B;QAA8B;QAA8B;QAA8B;QAA8B;KAA8B;AACva","debugId":null}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/recreate/recreate_on_react/src/components/menu/vanilla-helpers.ts"],"sourcesContent":["import type { AdditiveShape, Category, ProductDetails, RawSizes, SizeShape } from \"./types\";\r\nimport { FALLBACKS, IMGMAP, PLACEHOLDER_IMG } from \"./imgmap\";\r\n\r\nexport const toCents = (v: unknown) =>\r\n  Math.round((Number(String(v ?? 0).replace(\",\", \".\")) || 0) * 100);\r\nexport const fromCents = (c: number) => `$${(c / 100).toFixed(2)}`;\r\n\r\nexport type PriceCarrier = {\r\n  price?: string | number; discountPrice?: string | number;\r\n} & Partial<Record<\"add-price\"|\"addPrice\"|\"add_price\"|\"add\", string | number>>;\r\n\r\nexport function getPriceCents(obj: PriceCarrier | undefined, preferDiscount: boolean): number {\r\n  if (!obj) return 0;\r\n  const reg = obj.price ?? obj[\"add-price\"] ?? obj.addPrice ?? obj.add_price ?? obj.add ?? 0;\r\n  const disc = obj.discountPrice;\r\n  return preferDiscount && disc != null ? toCents(disc) : toCents(reg);\r\n}\r\n\r\nexport const isLoggedIn = () => !!(typeof window !== \"undefined\" && localStorage.getItem(\"authToken\"));\r\n\r\nexport function normalizeSizesAll(sizes?: RawSizes): {\r\n  std: Partial<Record<\"s\" | \"m\" | \"l\", SizeShape>>;\r\n  all: Record<string, SizeShape>;\r\n} {\r\n  const all: Record<string, SizeShape> = {};\r\n  if (sizes) Object.entries(sizes).forEach(([k, v]) => { if (v) all[k.toLowerCase()] = v; });\r\n  return { std: { s: all[\"s\"], m: all[\"m\"], l: all[\"l\"] }, all };\r\n}\r\n\r\nexport function pickFirstSizeKey(all: Record<string, SizeShape>): string | null {\r\n  const pref = [\"s\",\"m\",\"l\",\"xl\",\"xxl\",\"xs\",\"large\",\"medium\",\"small\"];\r\n  for (const k of pref) if (all[k]) return k;\r\n  const keys = Object.keys(all);\r\n  return keys.length ? keys[0] : null;\r\n}\r\n\r\nexport function imgForByCat(id: number, category: Category): string {\r\n  const map = IMGMAP[category] || {};\r\n  if (map[id]) return map[id];\r\n  const pool = FALLBACKS[category];\r\n  if (!pool?.length) return PLACEHOLDER_IMG;\r\n  const idx = Math.abs(id) % pool.length;\r\n  return pool[idx] || PLACEHOLDER_IMG;\r\n}\r\n\r\nexport function attachPriceTooltipHtml(priceRegularC: number, pricePayC: number, authed: boolean) {\r\n  const fmt = (c: number) => `$${(c / 100).toFixed(2)}`;\r\n  return authed && pricePayC < priceRegularC\r\n    ? `<s>${fmt(priceRegularC)}</s> <strong>${fmt(pricePayC)}</strong>`\r\n    : fmt(priceRegularC);\r\n}\r\n\r\nexport function computeTotals(d: ProductDetails, sizeKey: string, addsOn: Set<number>) {\r\n  const authed = isLoggedIn();\r\n  const { all: sizesAll } = normalizeSizesAll(d.sizes);\r\n\r\n  const sizeRegC = sizesAll[sizeKey] ? getPriceCents(sizesAll[sizeKey], false) : getPriceCents(d, false);\r\n  const sizePayC = sizesAll[sizeKey] ? getPriceCents(sizesAll[sizeKey], authed) : getPriceCents(d, authed);\r\n\r\n  let addsRegC = 0, addsPayC = 0;\r\n  (d.additives ?? []).forEach((ad, i) => {\r\n    if (addsOn.has(i)) {\r\n      addsRegC += getPriceCents(ad, false);\r\n      addsPayC += getPriceCents(ad, authed);\r\n    }\r\n  });\r\n\r\n  const totalRegC = sizeRegC + addsRegC;\r\n  const totalPayC = sizePayC + addsPayC;\r\n  return { totalRegC, totalPayC, sizeRegC, sizePayC };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/recreate/recreate_on_react/src/components/menu/ProductModal.tsx"],"sourcesContent":["\"use client\";\r\nimport type { ReactNode } from \"react\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport styles from \"@/styles/MenuPage.module.css\";\r\nimport type { Category, ProductDetails } from \"./types\";\r\nimport {\r\n  attachPriceTooltipHtml,\r\n  computeTotals,\r\n  fromCents,\r\n  getPriceCents,\r\n  imgForByCat,\r\n  isLoggedIn,\r\n  normalizeSizesAll,\r\n  pickFirstSizeKey,\r\n  toCents,\r\n} from \"./vanilla-helpers\";\r\nimport { PLACEHOLDER_IMG } from \"./imgmap\";\r\n\r\nexport default function ProductModal({\r\n  productId,\r\n  cat,\r\n  cardImg,\r\n  cardListPriceCents, // ← цена, показанная на карточке (в центах)\r\n  onClose,\r\n}: {\r\n  productId: number;\r\n  cat: Category;\r\n  cardImg?: string;\r\n  cardListPriceCents?: number;\r\n  onClose: () => void;\r\n}) {\r\n  const [data, setData] = useState<ProductDetails | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [sizeKey, setSizeKey] = useState<string>(\"s\");\r\n  const [addsOn, setAddsOn] = useState<Set<number>>(new Set());\r\n\r\n  useEffect(() => {\r\n    let abort = false;\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(`/api/products/${productId}`, { cache: \"no-store\" });\r\n        const raw = await res.json();\r\n        const d = raw?.data ?? raw;\r\n\r\n        const details: ProductDetails = {\r\n          id: d.id,\r\n          name: d.name,\r\n          description: d.description ?? \"\",\r\n          price: String(d.price),\r\n          discountPrice: d.discountPrice ? String(d.discountPrice) : undefined,\r\n          category: d.category as Category,\r\n          images: d.images ?? [],\r\n          sizes: d.sizes ?? undefined,\r\n          additives: d.additives ?? [],\r\n        };\r\n\r\n        if (abort) return;\r\n        setData(details);\r\n\r\n        // ---- ЕДИНЫЙ ДЕФОЛТ РАЗМЕР ----\r\n        // 1) если пришла cardListPriceCents — пробуем найти размер, у которого рег. цена совпадает\r\n        // 2) иначе берём 's', если есть\r\n        // 3) иначе — самый дешёвый по регулярной цене\r\n        const { all } = normalizeSizesAll(details.sizes);\r\n\r\n        let initKey: string | undefined;\r\n        if (cardListPriceCents && Object.keys(all).length) {\r\n          const match = Object.entries(all).find(\r\n            ([, s]) => getPriceCents(s, false) === cardListPriceCents\r\n          );\r\n          if (match) {\r\n            initKey = match[0];\r\n          }\r\n        }\r\n        if (!initKey) {\r\n          if (all[\"s\"]) {\r\n            initKey = \"s\";\r\n          } else if (Object.keys(all).length) {\r\n            initKey = Object.entries(all).sort(\r\n              (a, b) => getPriceCents(a[1], false) - getPriceCents(b[1], false)\r\n            )[0]?.[0];\r\n          }\r\n        }\r\n        setSizeKey(initKey ?? \"s\");\r\n        setAddsOn(new Set());\r\n      } finally {\r\n        if (!abort) setLoading(false);\r\n      }\r\n    })();\r\n    return () => {\r\n      abort = true;\r\n    };\r\n  }, [productId, cardListPriceCents]); // важно слушать cardListPriceCents\r\n\r\n  const imgSrc = useMemo(() => {\r\n    if (!data) return cardImg || imgForByCat(productId, cat);\r\n    const fromApi = Array.isArray(data.images) && data.images[0] ? data.images[0] : \"\";\r\n    return fromApi || cardImg || imgForByCat(data.id, data.category);\r\n  }, [data, cardImg, productId, cat]);\r\n\r\n  if (!data) {\r\n    return (\r\n      <div className={styles.pm__grid}>\r\n        <figure className={styles.pm__media}>\r\n          <img id=\"pmImg\" alt=\"Loading…\" src={imgSrc} />\r\n        </figure>\r\n        <div className={styles.pm__content}>\r\n          <div className={styles.pm__loading}>\r\n            <div className=\"fav-loader\">\r\n              <span className=\"fav-spinner\" aria-hidden=\"true\" />\r\n              <span className=\"fav-loader__text\">Loading details…</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const { all: sizesAll } = normalizeSizesAll(data.sizes);\r\n  const authed = isLoggedIn();\r\n  const { totalRegC, totalPayC } = computeTotals(data, sizeKey, addsOn);\r\n\r\n  const totalHtml: ReactNode =\r\n    authed && totalPayC < totalRegC ? (\r\n      <>\r\n        <s className={styles.priceOld}>{fromCents(totalRegC)}</s>{\" \"}\r\n        <strong className=\"price--new\">{fromCents(totalPayC)}</strong>\r\n      </>\r\n    ) : (\r\n      fromCents(totalRegC)\r\n    );\r\n\r\n  const addToCart = () => {\r\n    if (!data) return;\r\n    const sizeObj = sizesAll[sizeKey];\r\n    const sizeRegC = sizeObj ? getPriceCents(sizeObj, false) : getPriceCents(data, false);\r\n    const sizeDisc =\r\n      sizeObj?.discountPrice != null\r\n        ? toCents(sizeObj.discountPrice)\r\n        : data.discountPrice != null\r\n        ? toCents(data.discountPrice)\r\n        : undefined;\r\n\r\n    const sizeKeyStd = ([\"s\", \"m\", \"l\"] as const).includes(sizeKey as any)\r\n      ? (sizeKey as \"s\" | \"m\" | \"l\")\r\n      : \"s\";\r\n\r\n    const cartItem = {\r\n      productId: data.id,\r\n      name: data.name,\r\n      // basePrice = что реально оплачиваем за единицу (без добавок)\r\n      basePrice: (sizeDisc != null && authed ? sizeDisc : sizeRegC) / 100,\r\n      // price = «регулярная» цена ед., чтобы корректно рисовать перечёркивание\r\n      price: sizeRegC / 100,\r\n      discountPrice: sizeDisc != null ? sizeDisc / 100 : undefined,\r\n      sizeKey: sizeKeyStd,\r\n      sizeLabel: (sizeObj?.size ?? sizeObj?.label ?? \"\") || \"\",\r\n      adds: (data.additives ?? [])\r\n        .map((ad, i) =>\r\n          addsOn.has(i)\r\n            ? {\r\n                name: ad.name ?? ad.title ?? `Additive ${i + 1}`,\r\n                addPrice: getPriceCents(ad, authed) / 100,\r\n              }\r\n            : null\r\n        )\r\n        .filter(Boolean),\r\n      total: totalPayC / 100,\r\n      img: imgSrc,\r\n    };\r\n\r\n    const raw = localStorage.getItem(\"cart\");\r\n    const arr = raw ? JSON.parse(raw) : [];\r\n    arr.push(cartItem);\r\n    localStorage.setItem(\"cart\", JSON.stringify(arr));\r\n    (window as any).CartBadge?.update?.();\r\n    window.dispatchEvent(new Event(\"cart:updated\"));\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.pm__grid}>\r\n      <figure className={styles.pm__media}>\r\n        <img\r\n          id=\"pmImg\"\r\n          alt={data?.name ?? \"Loading preview\"}\r\n          src={imgSrc}\r\n          onError={(e) => {\r\n            (e.currentTarget as HTMLImageElement).src = PLACEHOLDER_IMG;\r\n          }}\r\n        />\r\n      </figure>\r\n\r\n      <div className={styles.pm__content}>\r\n        {loading && (\r\n          <div className={styles.pm__loading}>\r\n            <div className=\"fav-loader\">\r\n              <span className=\"fav-spinner\" aria-hidden=\"true\"></span>\r\n              <span className=\"fav-loader__text\">Loading details…</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <h3 id=\"pmTitle\" className={styles.pm__title}>\r\n          {data?.name ?? \"\"}\r\n        </h3>\r\n        <p id=\"pmDesc\" className={styles.pm__desc}>\r\n          {data?.description ?? \"\"}\r\n        </p>\r\n\r\n        <div className={styles.pm__section}>\r\n          <div className={styles.pm__label}>Size</div>\r\n\r\n          <nav id=\"pmSizes\" className={styles.pm__chips} aria-label=\"Sizes\">\r\n            {Object.entries(sizesAll).map(([k, sObj]) => {\r\n              if (!sObj) return null;\r\n\r\n              const sizeLabel = String(sObj.size ?? sObj.label ?? \"\");\r\n              const regC = getPriceCents(sObj, false) || getPriceCents(data, false);\r\n              const payC = getPriceCents(sObj, authed) || getPriceCents(data, authed);\r\n              const on = k === sizeKey;\r\n\r\n              return (\r\n                <button\r\n                  key={k}\r\n                  type=\"button\"\r\n                  className={styles[\"pm-chip\"]}\r\n                  data-on={on}\r\n                  aria-pressed={on}\r\n                  onClick={() => setSizeKey(k)}\r\n                >\r\n                  <span className={styles[\"pm-chip__lead\"]}>{k.toUpperCase()}</span>\r\n                  <span dangerouslySetInnerHTML={{ __html: sizeLabel }} />\r\n                  <span\r\n                    className=\"pm-tt\"\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: attachPriceTooltipHtml(regC, payC, authed),\r\n                    }}\r\n                  />\r\n                </button>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n\r\n        <div className={styles.pm__section}>\r\n          <div className={styles.pm__label}>Additives</div>\r\n\r\n          <nav id=\"pmAdds\" className={styles.pm__chips} aria-label=\"Additives\">\r\n            {(data?.additives ?? []).map((ad, i) => {\r\n              const name = ad.name ?? ad.title ?? `Additive ${i + 1}`;\r\n              const regC = getPriceCents(ad, false);\r\n              const payC = getPriceCents(ad, authed);\r\n              const on = addsOn.has(i);\r\n\r\n              return (\r\n                <button\r\n                  key={i}\r\n                  type=\"button\"\r\n                  className={styles[\"pm-chip\"]}\r\n                  data-on={on}\r\n                  aria-pressed={on}\r\n                  onClick={() => {\r\n                    const next = new Set(addsOn);\r\n                    on ? next.delete(i) : next.add(i);\r\n                    setAddsOn(next);\r\n                  }}\r\n                >\r\n                  <span className={styles[\"pm-chip__lead\"]}>{i + 1}</span>\r\n                  {name}\r\n                  <span\r\n                    className=\"pm-tt\"\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: attachPriceTooltipHtml(regC, payC, authed),\r\n                    }}\r\n                  />\r\n                </button>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n\r\n        <div className={styles.pm__total}>\r\n          <span className={styles[\"pm__total-label\"]}>Total:</span>\r\n          <strong id=\"pmTotal\" className={styles[\"pm__total-price\"]}>\r\n            {totalHtml}\r\n          </strong>\r\n        </div>\r\n\r\n        <p className={styles.pm__note}>\r\n          The cost is not final. Download our mobile app to see the final price and place your order…\r\n        </p>\r\n\r\n        <button className={styles.pm__close} type=\"button\" onClick={addToCart} disabled={!data || loading}>\r\n          Add to cart\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 741, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/recreate/recreate_on_react/src/components/menu/MenuPage.tsx"],"sourcesContent":["// app/components/menu/MenuPage.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport styles from \"@/styles/MenuPage.module.css\";\r\nimport type { Category } from \"./types\"; // оставляем только Category\r\nimport { FALLBACKS, IMGMAP, PLACEHOLDER_IMG } from \"./imgmap\";\r\nimport { isLoggedIn, toCents, fromCents } from \"./vanilla-helpers\";\r\nimport ProductModal from \"./ProductModal\";\r\n\r\nconst MOBILE_MAX = 768;\r\nconst MOBILE_VISIBLE = 4;\r\n\r\n// Локальный тип данных для карточки меню\r\ntype UIProduct = {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  category: Category;\r\n  image?: string | null;\r\n\r\n  // Поддерживаем оба варианта цен, какие бы ни пришли из API\r\n  price?: string | number | null;\r\n  discountPrice?: string | number | null;\r\n  priceCents?: number;\r\n  discountPriceCents?: number;\r\n\r\n  // служебное поле для отрисовки\r\n  _img?: string;\r\n};\r\n\r\nfunction normalizeImgPath(src?: string | null): string | null {\r\n  if (!src) return null;\r\n  const s = String(src).trim();\r\n  if (!s) return null;\r\n  if (/^https?:\\/\\//i.test(s)) return s; // абсолютные URL\r\n  if (s.startsWith(\"/\")) return s; // уже абсолютный путь на сайте\r\n  return `/assets/menu/${s}`; // просто имя файла → в assets/menu\r\n}\r\n\r\nexport default function MenuPage() {\r\n  const [items, setItems] = useState<UIProduct[]>([]);\r\n  const [cat, setCat] = useState<Category>(\"coffee\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedId, setSelectedId] = useState<number | null>(null);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  // читаем #hash как категорию\r\n  useEffect(() => {\r\n    const apply = () => {\r\n      const hash = (window.location.hash || \"\").slice(1) as Category;\r\n      if ([\"coffee\", \"tea\", \"dessert\"].includes(hash)) setCat(hash);\r\n    };\r\n    apply();\r\n    window.addEventListener(\"hashchange\", apply);\r\n    return () => window.removeEventListener(\"hashchange\", apply);\r\n  }, []);\r\n\r\n  // загрузка списка\r\n  useEffect(() => {\r\n    const controller = new AbortController();\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(`/api/products?sort=name_asc`, {\r\n          cache: \"no-store\",\r\n          signal: controller.signal,\r\n        });\r\n        if (!res.ok) {\r\n          console.error(\r\n            \"GET /api/products failed:\",\r\n            res.status,\r\n            await res.text()\r\n          );\r\n          setItems([]);\r\n          return;\r\n        }\r\n        const json = await res.json();\r\n\r\n        const rawList: any[] = Array.isArray(json)\r\n          ? json\r\n          : Array.isArray(json.items)\r\n          ? json.items\r\n          : Array.isArray(json.data)\r\n          ? json.data\r\n          : [];\r\n\r\n        const list: UIProduct[] = rawList.map((p) => ({\r\n          id: Number(p.id),\r\n          name: String(p.name ?? \"\"),\r\n          description: String(p.description ?? \"\"),\r\n          category: String(p.category ?? \"coffee\").toLowerCase() as Category,\r\n          image: typeof p.image === \"string\" ? p.image : null,\r\n\r\n          // что бы ни прислал API — сохраняем\r\n          price: p.price ?? null,\r\n          discountPrice: p.discountPrice ?? null,\r\n          priceCents:\r\n            typeof p.priceCents === \"number\" ? p.priceCents : undefined,\r\n          discountPriceCents:\r\n            typeof p.discountPriceCents === \"number\"\r\n              ? p.discountPriceCents\r\n              : undefined,\r\n        }));\r\n\r\n        setItems(list);\r\n      } catch (e) {\r\n        const isAbort =\r\n          (typeof DOMException !== \"undefined\" &&\r\n            e instanceof DOMException &&\r\n            e.name === \"AbortError\") ||\r\n          (typeof e === \"object\" &&\r\n            e !== null &&\r\n            \"name\" in e &&\r\n            (e as { name?: unknown }).name === \"AbortError\");\r\n\r\n        if (!isAbort) {\r\n          console.error(\"GET /api/products error:\", e);\r\n          setItems([]);\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n    return () => controller.abort();\r\n  }, []);\r\n\r\n  // Фильтрация по категории + выбор картинки (БД -> IMGMAP -> FALLBACKS -> PLACEHOLDER)\r\n  const filtered = useMemo(() => {\r\n    const list = items\r\n      .filter((p) => p.category === cat)\r\n      .sort((a, b) => a.id - b.id);\r\n\r\n    const pool = FALLBACKS[cat] ?? [];\r\n    const used = new Set<string>();\r\n    let cursor = 0;\r\n    const nextFromPool = () => {\r\n      if (!pool.length) return PLACEHOLDER_IMG;\r\n      for (let k = 0; k < pool.length; k++) {\r\n        const idx = (cursor + k) % pool.length;\r\n        const src = pool[idx];\r\n        if (!used.has(src)) {\r\n          used.add(src);\r\n          cursor = idx + 1;\r\n          return src;\r\n        }\r\n      }\r\n      return pool[0] || PLACEHOLDER_IMG;\r\n    };\r\n\r\n    return list.map((p) => {\r\n      const dbImg = normalizeImgPath(p.image ?? undefined);\r\n      const mapped = IMGMAP[cat]?.[p.id];\r\n      const chosen = dbImg ?? mapped ?? nextFromPool();\r\n      return { ...p, _img: chosen };\r\n    });\r\n  }, [items, cat]);\r\n\r\n  // Мобильное «показать ещё»\r\n  const [showAllMobile, setShowAllMobile] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  useEffect(() => {\r\n    const calc = () => setIsMobile(window.innerWidth <= MOBILE_MAX);\r\n    calc();\r\n    const onResize = () => {\r\n      setShowAllMobile(false);\r\n      calc();\r\n    };\r\n    window.addEventListener(\"resize\", onResize);\r\n    return () => window.removeEventListener(\"resize\", onResize);\r\n  }, []);\r\n\r\n  const visibleCards =\r\n    isMobile && !showAllMobile ? filtered.slice(0, MOBILE_VISIBLE) : filtered;\r\n\r\n  const openModal = (id: number) => {\r\n    setSelectedId(id);\r\n    setOpen(true);\r\n    document.body.classList.add(\"no-scroll\");\r\n  };\r\n  const closeModal = () => {\r\n    setOpen(false);\r\n    document.body.classList.remove(\"no-scroll\");\r\n  };\r\n\r\n  const authed = isLoggedIn();\r\n\r\n  return (\r\n    <section id=\"menu\" className={`${styles.menu} section`}>\r\n      <div className=\"container\">\r\n        <header className={styles.menu__head}>\r\n          <h1 className={`${styles.menu__title} heading-1`}>\r\n            Behind each of our cups\r\n            <br />\r\n            hides an <em className={styles.menu__accent}>amazing surprise</em>\r\n          </h1>\r\n\r\n          <nav className={styles.menu__filters} aria-label=\"Filters\">\r\n            {([\"coffee\", \"tea\", \"dessert\"] as const).map((k) => (\r\n              <button\r\n                key={k}\r\n                type=\"button\"\r\n                className={`${styles.chip} ${cat === k ? \"is-active\" : \"\"}`}\r\n                data-filter={k}\r\n                aria-pressed={cat === k}\r\n                onClick={() => setCat(k)}\r\n              >\r\n                <span className={styles.chip__iconbox} aria-hidden=\"true\">\r\n                  <img\r\n                    className=\"ico ico--hover\"\r\n                    src={`/assets/icons/${\r\n                      k === \"dessert\" ? \"desert\" : k\r\n                    }-hov.png`}\r\n                    alt=\"\"\r\n                    aria-hidden=\"true\"\r\n                  />\r\n                </span>\r\n                <span>{k[0].toUpperCase() + k.slice(1)}</span>\r\n              </button>\r\n            ))}\r\n          </nav>\r\n        </header>\r\n\r\n        <ol\r\n          className={styles.menu__grid}\r\n          role=\"region\"\r\n          aria-label=\"Products\"\r\n          aria-busy={loading}\r\n        >\r\n          {loading && (\r\n            <>\r\n              <li className={styles[\"grid-loader\"]}>\r\n                <span className=\"fav-spinner\" aria-hidden=\"true\"></span>\r\n                <span>Loading menu…</span>\r\n              </li>\r\n              <li className={styles[\"grid-loader\"]}></li>\r\n              <li className={styles[\"grid-loader\"]}></li>\r\n              <li className={styles[\"grid-loader\"]}></li>\r\n            </>\r\n          )}\r\n\r\n          {!loading &&\r\n            visibleCards.map((p) => {\r\n              const priceC =\r\n                typeof p.priceCents === \"number\"\r\n                  ? p.priceCents\r\n                  : toCents(String(p.price ?? \"0\"));\r\n\r\n              const discC =\r\n                typeof p.discountPriceCents === \"number\"\r\n                  ? p.discountPriceCents\r\n                  : p.discountPrice != null\r\n                  ? toCents(String(p.discountPrice))\r\n                  : 0;\r\n\r\n              const showDisc = authed && discC > 0 && discC < priceC;\r\n\r\n              return (\r\n                <li\r\n                  key={p.id}\r\n                  className={styles.card}\r\n                  data-type={p.category}\r\n                  data-id={p.id}\r\n                  onClick={() => openModal(p.id)}\r\n                >\r\n                  <figure className={styles.card__media}>\r\n                    <img\r\n                      src={p._img || PLACEHOLDER_IMG}\r\n                      alt={p.name}\r\n                      onError={(e) => {\r\n                        (e.currentTarget as HTMLImageElement).src =\r\n                          \"/assets/logo.svg\";\r\n                      }}\r\n                    />\r\n                  </figure>\r\n                  <div className={styles.card__body}>\r\n                    <h3 className={styles.card__title}>{p.name}</h3>\r\n                    <p className={styles.card__sub}>{p.description}</p>\r\n                    <div className={styles.card__price}>\r\n                      {showDisc ? (\r\n                        <>\r\n                          <s className=\"muted\">{fromCents(priceC)}</s>{\" \"}\r\n                          <strong>{fromCents(discC)}</strong>\r\n                        </>\r\n                      ) : (\r\n                        fromCents(priceC)\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              );\r\n            })}\r\n        </ol>\r\n\r\n        <div className={styles.menu__more}>\r\n          <button\r\n            id=\"load-more\"\r\n            className={styles.loadmore}\r\n            hidden={\r\n              !(isMobile && filtered.length > MOBILE_VISIBLE && !showAllMobile)\r\n            }\r\n            aria-label=\"Load more\"\r\n            onClick={() => setShowAllMobile(true)}\r\n          >\r\n            <svg\r\n              viewBox=\"0 0 24 24\"\r\n              width=\"70\"\r\n              height=\"70\"\r\n              aria-hidden=\"true\"\r\n              className=\"svg\"\r\n            >\r\n              <path\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                d=\"M20 12a8 8 0 1 1-2.3-5.7\"\r\n              />\r\n              <path\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                d=\"M20 3v6h-8\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Модалка */}\r\n      <div\r\n        id=\"productModal\"\r\n        className={`${styles.modal} ${open ? styles[\"is-open\"] : \"\"}`}\r\n        aria-hidden={!open}\r\n      >\r\n        <div\r\n          className={styles.modal__scrim}\r\n          data-close\r\n          onClick={closeModal}\r\n        ></div>\r\n        <div\r\n          className={styles.modal__dialog}\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-labelledby=\"pmTitle\"\r\n        >\r\n          <button\r\n            className={styles[\"modal__close-x\"]}\r\n            type=\"button\"\r\n            data-close\r\n            aria-label=\"Close modal\"\r\n            onClick={closeModal}\r\n          >\r\n            <svg\r\n              className={styles[\"modal__close-ico\"]}\r\n              viewBox=\"0 0 24 24\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path\r\n                d=\"M6 6l12 12M18 6L6 18\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n              />\r\n            </svg>\r\n          </button>\r\n\r\n          {open && selectedId && (\r\n            <ProductModal\r\n              productId={selectedId}\r\n              cat={cat}\r\n              cardImg={filtered.find((x) => x.id === selectedId)?._img}\r\n              onClose={closeModal}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}